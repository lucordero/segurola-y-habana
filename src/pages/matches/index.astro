---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import MatchPhotoGallery from '../../components/MatchPhoto/MatchPhotoGallery.astro';
import ModalPhotoViewer from '../../components/MatchPhoto/ModalPhotoViewer.tsx';
import { matchPhotos } from '../../data/matchPhotos.ts';

const photoId = Astro.url.searchParams.get('photo');
const initialIndex = photoId ? parseInt(photoId) - 1 : null; // Adjust index to match array
---

<Layout title="Segurola y Habana FC - Mejores Momentos">
    <Header />
    <body class="bg-gray-900 min-h-screen">
    <MatchPhotoGallery />

    {initialIndex !== null && (
            <ModalPhotoViewer
                    client:load
                    photos={matchPhotos}
                    initialIndex={initialIndex}
                    onClose={() => window.location.href = '/matches'}
            />
    )}
    </body>
    <Footer />
</Layout>